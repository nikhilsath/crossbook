{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block nav_buttons %}
<button id="dashboard_add" onclick="openDashboardModal()" class="bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600">+ Add</button>
{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold mb-4">Dashboard</h1>
<p class="text-gray-600">This page is under construction.</p>

<div id="dashboard-grid"
     class="relative w-full grid"
     style="grid-template-columns: repeat(20, 1fr); grid-auto-rows: 1em;">
  {% for w in widgets %}
    <div class="draggable-field border p-2 rounded shadow bg-gray-50"
         data-widget="{{ w.id }}"
         data-type="{{ w.widget_type }}"
         style="grid-column: {{ w.col_start }} / span {{ w.col_span }}; grid-row: {{ w.row_start }} / span {{ w.row_span }};">
      {{ w.title }}
    </div>
  {% endfor %}
</div>

{% include "dashboard_modal.html" %}

<script>const FIELD_SCHEMA = {{ field_schema | tojson }};</script>
<script type="module" src="{{ url_for('static', filename='js/dashboard_modal.js') }}"></script>
<script type="module" src="{{ url_for('static', filename='js/dashboard_grid.js') }}"></script>
{% endblock %}
